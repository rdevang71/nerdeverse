<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>NerdVerse</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Custom Styles -->
    <style>
      :root{
        --bg-dark: #0b0f13;
        --panel: rgba(20,24,30,0.72);
        --accent: #ffc107;
        --accent-2: #7b61ff;
        --accent-3: #00b7ff;
        --accent-4: #ff6ec7;
        --muted: #adb5bd;
        --glass-blur: 10px;
        --card-shadow: 0 10px 30px rgba(2,6,23,0.65);
        --transition-fast: 2s ease; /* slowed to 2s */
      }

      html,body {
        height: 100%;
        background:
          radial-gradient(900px 400px at 8% 12%, rgba(123,97,255,0.06), transparent 12%),
          radial-gradient(700px 300px at 92% 88%, rgba(0,183,255,0.04), transparent 10%),
          linear-gradient(180deg, var(--bg-dark) 0%, #071019 100%);
        color: #eaf0f8;
        -webkit-font-smoothing:antialiased;
        font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      }

      /* Navbar */
      .navbar {
        background: linear-gradient(90deg, rgba(10,13,17,0.86), rgba(13,18,24,0.86));
        backdrop-filter: blur(6px);
        border-bottom: 1px solid rgba(255,255,255,0.035);
        box-shadow: 0 8px 26px rgba(2,6,23,0.6);
        transition: background-color 2s ease, transform 2s ease;
      }

      .navbar-brand {
        font-weight: 800;
        font-size: 1.4rem;
        color: var(--accent) !important;
        display: flex;
        align-items: center;
        gap: .75rem;
        letter-spacing: 0.3px;
        text-shadow: 0 3px 12px rgba(255,192,38,0.06);
        animation: shimmer 8s linear infinite;
      }

      @keyframes shimmer {
        0% { filter: hue-rotate(0deg); }
        50% { filter: hue-rotate(25deg); }
        100% { filter: hue-rotate(0deg); }
      }

      .profile-greeting {
        display: flex;
        align-items: center;
        color: #ffffff;
        font-size: 0.95rem;
        animation: fadeInLeft 2000ms ease both;
      }

      .profile-pic {
        width: 38px;
        height: 38px;
        object-fit: cover;
        border-radius: 50%;
        margin-right: 8px;
        border: 2px solid var(--accent);
        transition: transform 2s ease, box-shadow 2s ease;
        box-shadow: 0 4px 14px rgba(0,0,0,0.5);
      }

      .profile-pic:hover {
        transform: scale(1.08) rotate(-3deg);
        box-shadow: 0 10px 30px rgba(123,97,255,0.18);
      }

      .nav-link {
        color: rgba(255,255,255,0.9) !important;
        transition: color 2s ease, transform 2s ease;
      }

      .nav-link:hover {
        color: var(--accent) !important;
        transform: translateY(-3px);
      }

      /* Main container override so pages feel like panels */
      main.container {
        max-width: 1100px;
        padding: 2rem;
        background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
        border-radius: 12px;
        box-shadow: var(--card-shadow);
        border: 1px solid rgba(255,255,255,0.03);
        backdrop-filter: blur(var(--glass-blur));
        transition: transform 2s ease, box-shadow 2s ease;
      }

      main.container:hover {
        transform: translateY(-4px);
      }

      h1, h2, h3 {
        color: #fff;
        text-shadow: 0 6px 18px rgba(2,6,23,0.6);
      }

      /* Cards */
      .card {
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border: 1px solid rgba(255,255,255,0.03);
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(2,6,23,0.55);
        overflow: hidden;
        transition: transform 2s ease, box-shadow 2s ease, filter 2s ease;
        transform-origin: center;
      }

      .card:hover {
        transform: translateY(-8px) rotateX(2deg);
        box-shadow: 0 20px 60px rgba(2,6,23,0.7);
        filter: saturate(1.05);
      }

      .card-img-top {
        max-height: 220px;
        object-fit: cover;
        transition: transform 2s ease, filter 2s ease;
        transform-origin: center;
      }

      .card:hover .card-img-top {
        transform: scale(1.06) translateY(-3px);
        filter: brightness(0.98);
      }

      .card-body .card-title {
        color: #fff;
        font-weight: 700;
      }

      .card-text {
        color: rgba(225,230,235,0.95);
      }

      .card-footer {
        background: linear-gradient(180deg, rgba(255,255,255,0.008), rgba(0,0,0,0.02));
        border-top: 1px solid rgba(255,255,255,0.02);
        padding: .75rem 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .card-footer small {
        color: rgba(250,250,250,0.98); /* ensured near-white for visibility */
        font-weight: 600;
        text-shadow: 0 2px 6px rgba(2,6,23,0.45);
        font-size: .85rem;
        line-height: 1.1;
      }

      .card-footer .meta {
        display: flex;
        gap: .6rem;
        align-items: center;
      }

      .card-footer .meta .username {
        color: rgba(255,255,255,0.98);
        background: linear-gradient(90deg, rgba(123,97,255,0.08), rgba(0,183,255,0.04));
        padding: .18rem .45rem;
        border-radius: 6px;
        font-weight:700;
        font-size:.82rem;
      }

      .card-footer .meta .date {
        color: rgba(240,245,250,0.96);
        font-size:.8rem;
      }

      .category-badge, .badge-category {
        display:inline-block;
        padding:.18rem .5rem;
        border-radius: 999px;
        font-weight:700;
        font-size:.75rem;
        color:#071019;
        background: linear-gradient(90deg, var(--accent-3), var(--accent-4));
        box-shadow: 0 6px 18px rgba(0,183,255,0.06);
      }

      .btn-primary {
        background: linear-gradient(90deg, var(--accent-2), var(--accent-4));
        border: none;
        color: #071019;
        font-weight: 700;
        box-shadow: 0 10px 30px rgba(123,97,255,0.16);
        transition: transform 2s ease, box-shadow 2s ease;
      }

      .btn-primary:hover {
        transform: translateY(-3px) scale(1.01);
        box-shadow: 0 14px 40px rgba(123,97,255,0.24);
      }

      .btn-outline-primary {
        color: var(--accent-3);
        border-color: rgba(0,183,255,0.22);
        transition: background 2s ease, transform 2s ease;
      }

      .btn-outline-primary:hover {
        background: rgba(0,183,255,0.06);
        transform: translateY(-3px);
      }

      input[type="text"], input[type="url"], textarea, select, .form-control, .form-select {
        background: rgba(255,255,255,0.02);
        border: 1px solid rgba(255,255,255,0.04);
        color: #eef6ff;
        transition: box-shadow 2s ease, border-color 2s ease, transform 2s ease;
        border-radius: 8px;
        padding: .65rem .75rem;
      }

      input:focus, textarea:focus, select:focus, .form-control:focus, .form-select:focus {
        outline: none;
        box-shadow: 0 6px 28px rgba(123,97,255,0.12);
        border-color: var(--accent-2);
        transform: translateY(-2px);
      }

      label.form-label {
        color: #e7f1ff;
        font-weight:700;
      }

      .alert-info {
        background: linear-gradient(90deg, rgba(0,183,255,0.06), rgba(123,97,255,0.04));
        color: #eaf6ff;
        border: 1px solid rgba(255,255,255,0.03);
      }

      @keyframes fadeInLeft {
        from { opacity:0; transform: translateX(-12px); }
        to { opacity:1; transform: translateX(0); }
      }

      @keyframes floaty {
        0% { transform: translateY(0); }
        50% { transform: translateY(-6px); }
        100% { transform: translateY(0); }
      }

      .floaty {
        animation: floaty 6s ease-in-out infinite;
      }

      .reveal {
        opacity: 0;
        transform: translateY(18px) scale(.995);
        transition: opacity 2s ease, transform 2s ease;
      }

      .reveal.visible {
        opacity:1;
        transform: translateY(0) scale(1);
      }

      .muted { color: var(--muted); }

      @media (prefers-reduced-motion: reduce) { * { animation:none !important; transition:none !important; } }
    </style>

    {% block extra_head %}{% endblock %}
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">
          NerdVerse
          {% if user.is_authenticated %}
            <span class="profile-greeting ms-3">
              {% if user.profile.profile_picture %}
                <img src="{{ user.profile.profile_picture.url }}" alt="Profile" class="profile-pic" />
              {% endif %}
              Hey, {{ user.username }}!
            </span>
          {% else %}
            <span class="profile-greeting ms-3">Welcome, Guest</span>
          {% endif %}
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'wishlist_list' %}">Your Wishlist</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'create_wishlist_item' %}">Create</a></li>

            {% if user.is_authenticated %}
            <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
            {% else %}
            <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Register</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="container my-5">
      {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="text-center">
      <div class="container">
        <p class="mb-0">Â© 2025 NerdVerse. Built with ðŸ’» and â˜•</p>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      (function(){
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
        const io = new IntersectionObserver((entries)=>{
          entries.forEach(e=>{
            if(e.isIntersecting){
              e.target.classList.add('visible');
              io.unobserve(e.target);
            }
          });
        }, { threshold: 0.12 });

        document.querySelectorAll('.card, .reveal').forEach(el=>{
          el.classList.add('reveal');
          io.observe(el);
        });
      })();
    </script>

    {% block extra_js %}{% endblock %}
  </body>
</html>